# Техническое задание №2

[![Java tests on ubuntu](https://github.com/kazantsev-s/tz2/actions/workflows/tests-ci.yml/badge.svg)](https://github.com/kazantsev-s/tz2/actions/workflows/tests-ci.yml)

В данном проекте реализовано тестирование небольшого Java проекта при помощи фреймворĸа JUnit5 и добавлено автоматизированное тестирование при внесении изменений в репозиторий проекта на GitHub при помощи CI/CD системы GitHub Actions.

## Установка

Для запуска тестов на своей рабочей машине необходимо скопировать репозиторий и проверить, что установлена актуальная версия [Java](https://www.oracle.com/java/technologies/downloads/) и [Maven](https://maven.apache.org/download.cgi)

```bash
https://github.com/kazantsev-s/tz2
java -version
mvn -version
```

## Структура проекта

Проект включает следующие ключевые директории и файлы:

- **.github/workflows/**: Директория, содержащая файлы конфигурации GitHub Actions (`.yml`), которые управляют сценариями CI.
- **.idea/**: Директория, создаваемая IDE Intellij IDEA и содержащая конфигурационные файлы проекта.
- **src/**: Основная директория для исходного кода Java:
  - **src/main/main.java**: Основной класс, содержащий методы `_min`, `_max`, `_sum`, `_mult` и `_readFile`.
  - **src/test/tests.java**: Классы тестов, реализующие unit-тесты с использованием фреймворка JUnit5.
- **pom.xml**: Файл конфигурации Maven, необходимый для управления зависимостями проекта и настройки сборки.
- **.txt файлы**: Файлы с данными, содержащие наборы чисел для тестирования функций проекта.
- **graph.png**: График зависимости времени выполнения функции от количества чисел.

## Основные классы и методы Java

### main.java

Файл `main.java` содержит основную логику, включая методы для чтения данных из файла, поиска минимума, максимума, подсчет суммы и произведения.

- **_readFile(List<Integer> nums, String path_name)**:
  Этот метод считывает целые числа из файла, путь к которому передается в переменной `path_name`. Числа добавляются в список `nums`. В случае возникновения ошибок ввода-вывода, они будут выведены в стандартный поток ошибок.

- **_min(List<Integer> nums)**:
  Возвращает минимальное значение из списка `nums`.

- **_max(List<Integer> nums)**:
  Возвращает максимальное значение из списка `nums`.

- **_sum(List<Integer> nums)**:
  Возвращает сумму всех чисел в списке `nums`.

- **_mult(List<Integer> nums)**:
  Возвращает произведение всех чисел в списке `nums`.

### tests.java

Файл `tests.java` содержит unit-тесты, написанные с использованием фреймворка JUnit5, которые тестируют функциональность, предоставляемую `main.java`.

- **readFile(String path)**:
  Вспомогательный метод, который читает числа из файла и возвращает их в виде списка `List<Integer>`.

- **@Test**:
  Аннотация `@Test` указывает на методы, которые должны выполняться как тесты, где для каждого тесты передается имя пути к файлу с входными данными и далее проверяются значения возвращаемые функциями с ожидаемыми.

### Запуск тестов

При установленных [Java](https://www.oracle.com/java/technologies/downloads/) и [Maven](https://maven.apache.org/download.cgi), можно запустить тесты при помощи:
```bash
mvn tests
```

## График зависимости времени выполнения функции от количества чисел

Для составления графика (`graph.png`) использовалась функция `_mult`, где каждый файл был заполнен числами `2000` от 100000 до 1000000 раз с шагом в 50000. Для измерения времени использовался метод `System.currentTimeMillis()`, где каждый файл прогонялся 1000 раз и считалось среднее значение.

## CI конфигурация

Файл конфигурации CI сервиса GitHub Actions, `test-ci.yml`, управляет автоматизированным тестированием проекта. Он содержит необходимые шаги для сборки проекта, выполнения тестов и отправки уведомлений.

- **on**: Триггеры, которые запускают workflow при push или pull request запросов в ветку `main`.
- **jobs**: Описание задач, таких как выбор версии ОС (**build**), уставнока ПО, сборка проекта и запуск тестов.
- **steps**: Конкретные шаги в каждой задаче.

- **if: success()**: Условный оператор, который позволяет отправлять уведомления в Telegram канал при успешном выполнении тестов.
- **if: failure()**: Условный оператор, который позволяет отправлять уведомления в Telegram канал при неуспешном выполнении тестов.

## Telegram канал с уведомлениями

После каждого изменения в репозитории в [Telegram канал](https://t.me/+WBdnfiN2X85kNWZi) бот отправляет сообщение об успешном/неуспешном выполнении тестов. ID чата (Telegram канала) и токен бота храняться в Secrets репозитория.

## Автор

Проект был написан студентом НИУ ВШЭ, группы ББИ233, Казанцевым Сергеем.




